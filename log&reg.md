# 登陆注册页

[toc]

## 一、注册页功能实现

### 1. 发送验证码

开始显示：发送验证码

用户点击之后，显示05秒后重新获取（定时器倒计时）

时间到了，自动改为：重新获取

### 2. 用户名验证

注意封装函数verifyxxx，失去焦点触发函数

用户名正则：`/^[a-zA-Z0-9-_]{6,10}$/`

若不符合要求，则提示信息，并return false中断程序，否则返回true

侦听使用 `change`事件，当鼠标离开了表单，并且表单值发生了变化时触发

### 3. 手机号验证

正则：`/^1(3\d|4[5-9]|5[0-35-9]|6[567]|7[0-8]|8\d|9[0-35-9])\d{8}$/`

沿用封装函数verify，同上

### 4. 验证码验证

正则：`/^\d{6}$/`

### 5. 密码验证

正则：`/^[a-zA-Z0-9-_]{6,20}$/`

### 6. 再次密码验证

若本次密码不等于与上面输入的密则返回错误信息

### 7. 同意协议

原生checkbox替换为使用字体图标，点击切换类

### 8. 表单提交

使用 `submit`提交事件

若未勾选同意协议，则提示：需要勾选

`classList.contains()`查看是否包含某个类，若有则返回true，否则false

若上面input表单 只要有模块，返回的是false则阻止提交

## 二、登陆页功能实现

表单验证等未做，不再过多描述

### 1. tab栏切换

账户登录及扫码登陆两栏

排他思想，点击一个清空当前带 `selected`类的 `li`的selected，并为当前点击添加selected类

两个li自定义id，点击时获取id

首先排他思想，使两个 `panel`内容块 `display`全为 `none`，并通过id控制索引为id的panel，其display为 `block`，实现tab栏切换

### 2. 点击登录跳转页面

先阻止默认行为

若没有勾选同意协议，则提示要勾选

`input`加上 `required`属性，表示不能为空

假设登录成功：把用户名记录到本地存储中，同时跳转到首页：`location.href`

### 3. 首页自动显示用户名

从登录页跳转过来之后，自动显示用户名

若点击退出，则不显示用户名

需要写渲染函数，退出需要用到

#### (1) 本地读取数据

若本地存储有记录的用户名，读取本地数据

需要把用户名写到第二个li中

格式：`<a href="javascript:;"><i>用户名</i></a>`

因为登陆了，所以第三个li免费注册内容改为：退出登陆

格式：`<li><a href="javascript:;">退出登陆</a></li>`

#### (2) 若本地存储中没有数据，则复原为默认结构

点击退出登陆，删除本地存储对应用户名数据

重新调用渲染函数
